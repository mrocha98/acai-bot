(this["webpackJsonpacai-bot"]=this["webpackJsonpacai-bot"]||[]).push([[0],{1138:function(e,t){},1139:function(e,t){},1140:function(e,t){},1258:function(e,t){},1268:function(e,t){},1269:function(e,t){},1270:function(e,t){},1285:function(e,t){},1292:function(e,t,a){},1310:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(99),i=a.n(c),r=(a(445),a(62)),s=(a(446),a(432)),l=Object(s.createGlobalState)({modalCardapio:""}),u=l.GlobalStateProvider,m=l.setGlobalState,d=l.useGlobalState,p=function(){m("modalCardapio","show")},h=function(e){e.stopPropagation(),m("modalCardapio","")},f=a(439),b=a(433),E={nome:"A\xe7a\xed Delivery",status:"online",fotoUrl:"https://cdn.pixabay.com/photo/2017/09/03/01/20/acai-2709077_960_720.jpg"},v=[{id:1,tipo:"tamanho",nome:"Pequeno (300ml)",preco:7.5},{id:2,tipo:"adicional",nome:"Confete",preco:1.5},{id:3,tipo:"tamanho",nome:"M\xe9dio (500ml)",preco:8.15},{id:4,tipo:"adicional",nome:"Leite Mo\xe7a",preco:1.75},{id:5,tipo:"adicional",nome:"Leite Ninho",preco:1.25},{id:6,tipo:"adicional",nome:"Pa\xe7oca",preco:1.75},{id:7,tipo:"tamanho",nome:"Grande (700ml)",preco:10},{id:8,tipo:"adicional",nome:"Granola",preco:1},{id:9,tipo:"adicional",nome:"Bis",preco:2.1},{id:10,tipo:"adicional",nome:"Bis Branco",preco:2.35},{id:11,tipo:"adicional",nome:"Ovomaltine",preco:3.3}];a(512),a(513),a(514),a(515);a(516);var g=function(e){var t=e.nome,a=e.preco;return o.a.createElement("div",{className:"item-cardapio"},o.a.createElement("span",{className:"item-cardapio__nome"},t),o.a.createElement("span",{className:"item-cardapio__preco"},"R$ ",function(e){var t=e.toString().replace(".",","),a=t.split(",");if(1===a.length)return t.concat(",00");var n=a[0],o=a[1];return o.length<2?n.concat(",").concat(o).concat("0"):t}(a)))},k=a(434),N=a(435),C=function(e){var t=e.itens;return o.a.createElement("div",{className:"cardapio"},o.a.createElement("div",{className:"cardapio__banner"},o.a.createElement("img",{className:"cardapio__imagem",alt:"a\xe7a\xed",src:"https://blog.finamac.com/wp-content/uploads/2018/07/218564-voce-conhece-quais-os-beneficios-do-acai-para-saude-1280x640.jpg"}),o.a.createElement("h1",{className:"cardapio__titulo"},"Card\xe1pio"),o.a.createElement("button",{className:"cardapio__fechar",onClick:h},o.a.createElement(k.a,{className:"cardapio__icone-fechar",icon:N.a}))),o.a.createElement("div",{className:"cardapio__info"},o.a.createElement("h2",{className:"cardapio__tamanhos"},"Tamanhos"),o.a.createElement("ul",{className:"cardapio__itens"},t.filter((function(e){return"tamanho"===e.tipo})).map((function(e){return o.a.createElement(g,Object.assign({key:e.id},e))}))),o.a.createElement("br",null),o.a.createElement("h2",{className:"cardapio__adicionais"},"Adicionais"),o.a.createElement("ul",{className:"cardapio__itens"},t.filter((function(e){return"adicional"===e.tipo})).map((function(e){return o.a.createElement(g,Object.assign({key:e.id},e))})))))},_=function(e){var t=e.className,a=e.itens;return o.a.createElement("div",{className:"".concat(t," modal")},o.a.createElement(C,{itens:a}))},w=function(e){var t=e.nome,a=e.status,n=e.fotoUrl,c=d("modalCardapio"),i=Object(f.a)(c,1)[0];return o.a.createElement("header",{className:"barra-superior"},o.a.createElement("div",{className:"barra-superior__foto",style:{backgroundImage:"url(".concat(n,")")}}),o.a.createElement("div",{className:"barra-superior__info"},o.a.createElement("h1",{className:"barra-superior__nome"},t),o.a.createElement("h2",{className:"barra-superior__status"},a)),o.a.createElement(b.Button,{className:"barra-superior__modal-cardapio",onClick:p},"Ver card\xe1pio"),o.a.createElement(_,{className:i,itens:v}))},x=a(135),O=a(136),B=a(138),S=a(137),I=a(65),j=a(139),y=(a(518),a(519),a(520),a(132)),A=a(436),L=a.n(A),F=a(61),D=a.n(F),J=function(e){var t=e.nome;return D.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2300,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",D.a.stopTimer),e.addEventListener("mouseleave",D.a.resumeTimer)}}).fire({icon:"success",title:"".concat(t," autenticado com sucesso!")}),null},T=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(B.a)(this,Object(S.a)(t).call(this,e))).styleSet=window.WebChat.createStyleSet({bubbleBackground:"#FFF",bubbleFromUserBackground:"#e1ffc7",hideUploadButton:!0,sendBoxBackground:"White",sendBoxButtonColor:"#009a8e",sendBoxButtonColorOnHover:"rgba(66,65,67,0.7)",timestampFormat:"absolute"}),a.directLine=new y.DirectLine({token:"".concat("xvyPNpIuVCs.wgFDoF6BrLTwElbmBdmoQUuEoEk9ezAJxJm2gYrHoaA")}),a.state={user:"",value:""},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(I.a)(a)),a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.value;t?this.setState({user:t}):D.a.fire({icon:"error",text:"Digite um nome v\xe1lido!"})}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.value;return o.a.createElement("div",{className:"chat"},t?o.a.createElement(o.a.Fragment,null,o.a.createElement(J,{nome:t}),o.a.createElement(L.a,{directLine:this.directLine,userID:t,styleSet:this.styleSet})):o.a.createElement("div",{className:"container-validacao"},o.a.createElement("div",{className:"form-autenticacao box has-text-centered"},o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label title is-3"},"Entre com seu nome"),o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input",type:"text",value:a,onChange:this.handleChange})),o.a.createElement("button",{className:"form-autenticacao__button",onClick:this.handleSubmit},"Enviar")))))}}]),t}(o.a.Component),P=function(){return o.a.createElement(n.StrictMode,null,o.a.createElement(u,null,o.a.createElement(w,E)),o.a.createElement(T,null))},R=a(37),z=a.n(R),U=a(101),H=(a(1292),a(102)),M=a.n(H),G="https://directline.botframework.com/v3/directline/tokens/generate",V="https://directline.botframework.com/v3/directline/conversations",Q=function(e){return"https://directline.botframework.com/v3/directline/conversations/".concat(e,"/activities")},Y=function(e,t){return"https://directline.botframework.com/v3/directline/conversations/".concat(e,"/activities?watermark=").concat(t)},W=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(B.a)(this,Object(S.a)(t).call(this,e))).autentica=Object(U.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.handleClick(),e.next=3,M.a.post(G,{},{headers:{Authorization:"bearer ".concat("xvyPNpIuVCs.wgFDoF6BrLTwElbmBdmoQUuEoEk9ezAJxJm2gYrHoaA")}}).then((function(e){a.setState({isAuthenticated:!0,token:e.data.token}),console.log("autentica\xe7\xe3o efetuada com sucesso")})).catch((function(e){return console.log("Erro ao autenticar!\n".concat(e))}));case 3:a.handleClick();case 4:case"end":return e.stop()}}),e)}))),a.inicia=Object(U.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.handleClick(),e.next=3,M.a.post(V,{},{headers:{Authorization:"bearer ".concat("xvyPNpIuVCs.wgFDoF6BrLTwElbmBdmoQUuEoEk9ezAJxJm2gYrHoaA")}}).then((function(e){a.setState({conversationId:e.data.conversationId}),console.log("comunica\xe7\xe3o bem sucedida")})).catch((function(e){return console.log("Erro ao iniciar conversa!\n".concat(e))}));case 3:a.handleClick();case 4:case"end":return e.stop()}}),e)}))),a.enviaOi=Object(U.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.handleClick(),e.next=3,M.a.post(Q(a.state.conversationId),{type:"message",from:{id:"id_fulano",name:"Fulano"},text:"oi"},{headers:{Authorization:"bearer ".concat("xvyPNpIuVCs.wgFDoF6BrLTwElbmBdmoQUuEoEk9ezAJxJm2gYrHoaA")}}).then((function(e){var t=e.data.id.split("|");a.setState({botResponseId:t}),console.log("oi enviado")})).catch((function(e){return console.log("Erro ao enviar oi!\n".concat(e))}));case 3:a.handleClick();case 4:case"end":return e.stop()}}),e)}))),a.recebeRespostas=Object(U.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.handleClick(),e.next=3,M.a.get(Y(a.state.botResponseId[0],a.state.botResponseId[1]),{headers:{Authorization:"bearer ".concat("xvyPNpIuVCs.wgFDoF6BrLTwElbmBdmoQUuEoEk9ezAJxJm2gYrHoaA")}}).then((function(e){var t=[];e.data.activities.forEach((function(e){return t.push(e)})),console.log(t),a.setState({responses:t}),a.state.responses.forEach((function(e){D.a.fire({text:e.text})}))}));case 3:a.handleClick();case 4:case"end":return e.stop()}}),e)}))),a.handleClick=a.handleClick.bind(Object(I.a)(a)),a.state={botResponseId:[],conversationId:"",isAuthenticated:!1,isLoading:!1,responses:[],token:""},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"handleClick",value:function(){this.setState({isLoading:!this.state.isLoading})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"CHATBOT - Teste de integra\xe7\xe3o"),o.a.createElement("div",{className:"secoes"},o.a.createElement("section",{className:"acoes"},o.a.createElement("ol",null,o.a.createElement("li",null,o.a.createElement("button",{className:this.state.isLoading?"button is-loading":"button",onClick:this.autentica},"Autentica")),o.a.createElement("li",null,o.a.createElement("button",{className:this.state.isLoading?"button is-loading":"button",onClick:this.inicia},"Inicia conversa")),o.a.createElement("li",null,o.a.createElement("button",{className:this.state.isLoading?"button is-loading":"button",onClick:this.enviaOi},'Enviar "oi"')),o.a.createElement("li",null,o.a.createElement("button",{className:this.state.isLoading?"button is-loading":"button",onClick:this.recebeRespostas},"Receber Respostas")))),o.a.createElement("section",{className:"respostas"},o.a.createElement("p",null,"Autenticado? ",this.state.isAuthenticated?o.a.createElement("span",null,"SIM"):o.a.createElement("span",null,"N\xc3O")),o.a.createElement("p",null,"Token recebido? ",this.state.token?o.a.createElement("span",null,"SIM"):o.a.createElement("span",null,"N\xc3O")),o.a.createElement("p",null,"ID da conversa recebido? ",this.state.conversationId?o.a.createElement("span",null,"SIM"):o.a.createElement("span",null,"N\xc3O")),o.a.createElement("p",null,"ID da resposta recebido? ",this.state.botResponseId.length>0?o.a.createElement("span",null,"SIM"):o.a.createElement("span",null,"N\xc3O")))))}}]),t}(o.a.Component),q=function(){return o.a.createElement(r.c,null,o.a.createElement(r.a,{exact:!0,path:"/",component:P}),o.a.createElement(r.a,{exact:!0,path:"/integracao",component:W}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(216);i.a.render(o.a.createElement($.a,null,o.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},440:function(e,t,a){e.exports=a(1310)},445:function(e,t,a){},446:function(e,t,a){},512:function(e,t,a){},513:function(e,t,a){},514:function(e,t,a){},515:function(e,t,a){},516:function(e,t,a){},518:function(e,t,a){},519:function(e,t,a){},520:function(e,t,a){},623:function(e,t){},625:function(e,t){},659:function(e,t){},660:function(e,t){}},[[440,1,2]]]);
//# sourceMappingURL=main.928b05ed.chunk.js.map